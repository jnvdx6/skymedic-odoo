<?xml version="1.0"?>
<odoo>

    <!-- Quick Log Wizard Form -->
    <record id="view_commercial_quick_log_form" model="ir.ui.view">
        <field name="name">commercial.quick.log.form</field>
        <field name="model">commercial.quick.log</field>
        <field name="arch" type="xml">
            <form string="Registro Rápido">
                <group>
                    <field name="mode" widget="radio" options="{'horizontal': true}"/>
                </group>

                <!-- Individual mode -->
                <group invisible="mode != 'single'">
                    <group>
                        <field name="partner_id"
                            placeholder="Seleccionar cliente..."
                            options="{'no_create': True}"/>
                        <field name="activity_type_id"
                            placeholder="Tipo de actividad..."/>
                    </group>
                    <group>
                        <field name="date"/>
                    </group>
                    <group col="1">
                        <field name="feedback"
                            placeholder="Notas rápidas de la actividad..."
                            nolabel="1"/>
                    </group>
                </group>

                <!-- Batch mode -->
                <group invisible="mode != 'batch'" col="1">
                    <field name="line_ids" nolabel="1">
                        <list editable="bottom">
                            <field name="partner_id"
                                options="{'no_create': True}"/>
                            <field name="activity_type_id"/>
                            <field name="date"/>
                            <field name="feedback"
                                placeholder="Notas..."/>
                        </list>
                    </field>
                </group>

                <footer>
                    <button string="Registrar"
                        name="action_log_single"
                        type="object"
                        class="btn-primary"
                        icon="fa-check"
                        invisible="mode != 'single'"/>
                    <button string="Registrar Todo"
                        name="action_log_batch"
                        type="object"
                        class="btn-primary"
                        icon="fa-check-double"
                        invisible="mode != 'batch'"/>
                    <button string="Cancelar" class="btn-secondary" special="cancel"/>
                </footer>
            </form>
        </field>
    </record>

    <!-- Quick Log Action (for menu access - batch mode default) -->
    <record id="action_commercial_quick_log" model="ir.actions.act_window">
        <field name="name">Registro Rápido</field>
        <field name="res_model">commercial.quick.log</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
        <field name="context">{'default_mode': 'batch'}</field>
    </record>

</odoo>
